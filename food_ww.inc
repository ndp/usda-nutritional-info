<?  global $gramwts;	global $Msre_Descs;	echo "<table border=\"2\" cellpadding=\"4\">\n<tr>";/*	echo "<th>Nutrient</th>";		reset($gramwts);	while (list($key,$value)=each($gramwts)) {		echo "<th>";		echo $Msre_Descs[$key];		echo " (".$value."g)";		echo "</th>";	}	echo "</tr>";*/		$fat = "";	$fiber = "";	$calories = "";		$sql = "SELECT TagName, NutrDesc, Nutr_Val,Units FROM NUT_DATA, NUTR_DEF WHERE ndb_no=\"$ndb\" AND NUT_DATA.Nutr_No=NUTR_DEF.Nutr_No AND  (TagName = \"ENERC_KCAL\" OR TagName = \"FAT\" OR TagName = \"FIBTG\") ORDER BY NUTR_DEF.NutrDesc;";	$result = mysql_query($sql, $conn);	while ($row = mysql_fetch_row($result)) 	{ 		reset($gramwts);		while (list($key,$value)=each($gramwts)) 		{			$temp = $row[2]*$value/100;				# Nutr. per (100g of Food) / (100 g) * (100g of Food) * g per server = g/serving 						$newkey = $Msre_Descs[$key];			switch ($row[0] ) 			{				case "ENERC_KCAL":				{					$calories[$newkey] = $temp;					break;				}				case "FAT":				{					$fat[$newkey] = $temp;					break;				}				case "FIBTG":				{					$fiber[$newkey] = $temp;					break;				}			}		}	}		while (list($key,$value)=each($Msre_Descs)) 	{		$points = 0.25+(($calories[$value]-(MIN(4,$fiber[$value])*10))/50)+($fat[$value]/12);		echo "<tr>";		echo "<td align=\"right\" valign=\"top\" width=\"140\">";		echo "<h3>";		echo $value;		echo "</h3>";		echo "<p>";		echo "(";		echo $gramwts[$key];		echo " g)</p>";		echo "</td>";		echo "<td>";		echo "<h3>";		echo "<em>";		echo round($points);		echo "</em>";		echo " point";		echo round($points) != 1 ? "s" : "";		echo "</h3>";		echo "<p>";		echo "Calories: ";		echo round($calories[$value]);		echo ", ";		echo "Fat: ";		echo $fat[$value];		echo ", ";		echo "Fiber: ";		echo $fiber[$value];		echo "</p>";		echo "</td></tr>\n";	}	/*	echo "<tr>";		echo "<td>$row[0] ($row[2])</td>";			echo "<td align=\"right\">";			echo $row[1]*$value/100; # Nutr. per (100g of Food) / (100 g) * (100g of Food) * g per server = g/serving 			echo " ";			echo "$row[2]";			echo "</td>";		}		echo "</tr>\n";	}*/	/*mysql> select Nutr_No,TAGNAME, NutrDesc from NUTR_DEF WHERE TAGNAME="FAT" OR TAGNAME LIKE "ENER%" Or TAGNAME LIKE "FA%" OR TAGNAME LIKE "%FIB%" OR TAGNAME LIKE "%FA%";+---------+------------+------------------------------+| Nutr_No | TAGNAME    | NutrDesc                     |+---------+------------+------------------------------+|     646 | FAPU       | Fatty acids, polyunsaturated ||     645 | FAMS       | Fatty acids, monounsaturated ||     606 | FASAT      | Fatty acids, saturated       ||     291 | FIBTG      | Fiber, total dietary         ||     268 | ENERC_KJ   | Energy                       ||     208 | ENERC_KCAL | Energy                       ||     204 | FAT        | Total lipid (fat)            |+---------+------------+------------------------------+*/	?>