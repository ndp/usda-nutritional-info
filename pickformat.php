<?php require_once("usdalib.php");require_once("HTML/select.php");session_start();if (isset($_GET["area"]) && strlen($_GET["area"])){	$area = stripslashes($_GET["area"]);	$_SESSION["area"] = $area;}else{	header("refresh: 2; pickarea.php");	exit;}$style = "";if (!$conn_meta){	header("refresh: 0; pickarea.php");	exit;}printHtmlHeadBody("Pick Format");?><form action="list.php" method="GET">	<h2>Table Report</h2>	<table border="0">		<tr>			<th>				Please choose columns: 			</th>			<td width="500"><?php			$colSelector = new HTML_Select("c[]", 5, true);			if ($colSelector->				loadQuery($conn_meta, 'SELECT CONCAT(fields.name, " ", IFNULL(fields.description, "") ) as n, id FROM usda_meta.fields WHERE fields.area="'.$_SESSION["area"].'" AND fields.usage like "%list%" ORDER BY n', "n", "id") ) { print($colSelector->toHtml()); } ?> 			</td>		</tr>		<tr>			<th>				Search filter: 			</th>			<td>				<textarea name="filter" rows="4" cols="80"><?php			if (!isset($filter) || strlen($filter) == 0) 			{ 				print 'food_des.description like "%pear%"';			}			else				print $filter; ?>				</textarea>			</td>		</tr>		<tr>			<th>				Choose a style: 			</th>			<td><?php			$styleSelector = new HTML_Select("style", 4, false);			if ($styleSelector->				loadQuery($conn_meta, "SELECT styles.name, styles.id FROM usda_meta.styles ORDER BY styles.name", "name", "id") ) print($styleSelector->toHtml()); ?> 			</td>		</tr>		<tr>			<th>				&nbsp 			</th>			<td>				<input name="submit" type="submit" value="Make Table"> 			</td>		</tr>	</table></form><hr><form action="crosstab.php" method="GET">	<h2>CrossTab Report</h2>	<table>		<tr>			<th>				Please choose rows: 			</th>			<td><?php			$crossRowSelector = new HTML_Select("r[]");			if ($crossRowSelector->				loadQuery($conn_meta, "SELECT CONCAT(fields.name, \" \", IFNULL(fields.description, \"\") ) as n, id FROM usda_meta.fields WHERE fields.area=\"".$_SESSION["area"]."\" AND fields.usage like \"%xtab%\" ORDER BY n", "n", "id") ) { print($crossRowSelector->toHtml()); } ?> 			</td>		</tr>		<tr>			<th>				Please choose columns: 			</th>			<td><?php			$crossColSelector = new HTML_Select("c[]");			if ($crossColSelector->				loadQuery($conn_meta, "SELECT CONCAT(fields.name, \" \", IFNULL(fields.description, \"\") ) as n, id FROM usda_meta.fields WHERE fields.area=\"".$_SESSION["area"]."\" AND fields.usage like \"%xtab%\" ORDER BY n", "n", "id") ) { print($crossColSelector->toHtml()); } ?> 			</td>		</tr>		<tr>			<th>				Search filter: 			</th>			<td>				<textarea name="filter" rows="4" cols="80">					food_des.description like "%pear%" 				</textarea>			</td>		</tr>		<tr>			<th>				Choose a style: 			</th>			<td><?php			$style2Selector = new HTML_Select("style", 4, false);			if ($style2Selector->				loadQuery($conn_meta, "SELECT styles.name, styles.id FROM usda_meta.styles ORDER BY styles.name", "name", "id") ) print($style2Selector->toHtml()); ?> 			</td>		</tr>		<tr>			<th>				&nbsp 			</th>			<td>				<input name="submit" type="submit" value="CrossTab"> 			</td>		</tr>	</table></form></body></html><?php		$conn_meta->free; ?>